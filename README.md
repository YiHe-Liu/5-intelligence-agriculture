# 5-intelligence-agriculture
## 项目名称：二氧化碳浓度监测仪
作者 | github ID
---------- | -------------
颜海月 | haiyue-yan
刘倚赫 |	YiHe-Liu
马姣姣 |	Gioia-Ma
杨弘毅 |	Hongyi-Yangz
李芋霖 |	linyu-lee
朱语 |	520zy520

## 一、问题定义
   
## 二、概念设计
   
## 三、详细设计
###3.2分析、实验与建模
####分析：

监测设备在实际的运用过程中有如下几点问题需要重点考虑：

1.设备成本

2.监测范围

3.使用寿命

其中，成本往往是我们首先需要考虑的。其次，监测范围会影响实际应用的布局，且一定程度上影响成本。最后是寿命。

####实验：

由于时间紧迫且未实现部分辅助功能，故未进行实验。

####建模：
采用数学建模：

从分析中的前两点：设备成本和监测范围进行综合考虑。

由于Lora通信的距离限制，现假设有一3km x 3km农田如下：
 
假设大棚长w<l<3w,宽w（包含道路）,面积为s，由于大棚空气不流通，检测装置(成本i1=100)覆盖半径r最多为15m，覆盖面积为S,实际每个网关g(成本i2=60)在节点每五分钟发送一次二氧化碳浓度的情况下能够最多连接2000个节点，发送时间间隔t与节点容量c成正比(时间间隔最多为10分钟)，总成本为I。节点数为n。

我们可以得到如下方程：(采用蜂窝式覆盖)

约束条件：

                                                     0<r<=15 	0<t<=10   5<=w<=100
                           S=2.25r2  s=l*w  n=s/S*3*x*y  c=2000/5*t  x=3000/l  y=3000/w i1=100 i2=60
                                                         I=(n/c)* i2+n* i1
                                                         
得到当w=100, L=300, r=15, t=10时，成本最低，成本为I=541334元，即当大棚面积尽可能大时，成本较低且能够全覆盖。

###3.3制造过程
####节点：
1.外壳由激光切割亚克力板制作，胶水粘合，可以更换成成本低廉的塑料外壳。  
2.LED液晶显示屏由老师准备，在亚克力板上开口并且使用双面胶粘在亚克力板上,同时将显示屏连接至esp32上的P21和P22 IIC排针，以及供电和地线排针。
3.Lora模块沿用期中作业的Lora模块。Lora将数据发送出去。
4.esp32同上。
5.蜂鸣器由老师采购，将蜂鸣器连接至esp32 P20排针。在二氧化碳浓度过高时给与高电平，蜂鸣器报警（未完成）；
6.灯条由老师采购，将灯条连接至esp32 P19排针及供电和地线。在二氧化碳浓度过高时，灯条点亮（未完成）；
7.将二氧化碳传感器连接至esp32上，用于监测二氧化碳和空气中可溶性挥发物浓度。将数据返回至esp32。
其他：
	小组制作了两条三接口的杜邦线：用于3v3与5v的供电，一条4接口的杜邦线：用于接地线；
####网关：
同上，但是去掉二氧化碳传感器。（未完成）。

## 四、性能指标
Ccs811二氧化碳传感器不仅能够测出二氧化碳浓度，且能够测出空气中可溶挥发物浓度。在将设备接入电脑以后，设备能够返回二氧化碳浓度和空气中可溶挥发物浓度：

###1.使用寿命（无法测试）

###2.灵敏度

	灵敏度高，在测试过程中，能够短时间内（<0.5s）反映出二氧化碳浓度变化。对于大棚蔬菜来说这样的灵敏度已经足够。 
   
###3.稳定性

	稳定良好。在测试过程中，二氧化碳浓度会突然出现短时间虚高的情况，代码上难以修正，查询网络，初步认为是ccs811芯片问题。
   
###4.测量精度

	测量精度高，测量精确到个位数。对于农业要求已经足够。
   
###5.使用时长

	测试中使用充电宝供电，测试完成充电宝电量几乎没有减少。
   
###6.远程可检测

	使用节点——网关的模式，可以从远处接收数据，并进行报警。（未完成）

所以该设备能在成本较低的情况下（与其他产品对比），可以得到较高的精度与较低的延时与及时的警报。

## 五、代码

## 六、代码如何运行
